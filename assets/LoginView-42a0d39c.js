import{a4 as x,aM as _,a5 as h,at as k,a8 as y,ab as C,aa as t,j as e,az as S,ae as c,ai as o,aK as B,aL as i,V as F,ay as M}from"./index-3860cfd7.js";import{c as T,d,u as U,b as m,V as q}from"./vee-validate.esm-ece12aee.js";import{V as z}from"./VContainer-472509fa.js";import{V as L,a as p}from"./VRow-709d85fd.js";/* empty css              */const A={__name:"LoginView",setup(N){const u=x(),f=_(),V=h(),b=T({account:d().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字"),password:d().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字")}),{handleSubmit:v,isSubmitting:g}=U({validationSchema:b}),s=m("account"),r=m("password"),w=v(async l=>{try{const{data:a}=await k.post("/users/login",{account:l.account,password:l.password});V.login({token:a.result.token,account:a.result.account,email:a.result.email,cart:a.result.cart,role:a.result.role}),u({text:"登入成功!",showCloseButton:!1,snackbarProps:{timeout:5e3,color:"#0e2a47ff",location:"top",variant:"tonal"}}),f.push("/")}catch(a){u({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:5e3,color:"#B71C1C",location:"top"}})}});return(l,a)=>(y(),C(z,null,{default:t(()=>[e(M,{class:"mx-auto pa-12 pb-8 my-8",elevation:"2","max-width":"448",rounded:"lg","data-aos":"fade-down","data-aos-duration":"1500","data-aos-delay":"200"},{default:t(()=>[e(L,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(S,{class:"text-center text-h4"},{default:t(()=>[c("✦ 登入 ✦")]),_:1})]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(q,{disabled:o(g),onSubmit:B(o(w),["prevent"])},{default:t(()=>[e(i,{modelValue:o(s).value.value,"onUpdate:modelValue":a[0]||(a[0]=n=>o(s).value.value=n),"error-messages":o(s).errorMessage.value,label:"帳號",counter:"",maxlength:"20",variant:"outlined","prepend-inner-icon":"mdi-account-circle-outline",class:"my-2"},null,8,["modelValue","error-messages"]),e(i,{modelValue:o(r).value.value,"onUpdate:modelValue":a[1]||(a[1]=n=>o(r).value.value=n),"error-messages":o(r).errorMessage.value,label:"密碼",type:"password",counter:"",maxlength:"20",variant:"outlined","prepend-inner-icon":"mdi-lock-outline",class:"my-2"},null,8,["modelValue","error-messages"]),e(F,{type:"submit",block:"",class:"mb-8",color:"#0e2a47ff",size:"large",variant:"flat",theme:"dark"},{default:t(()=>[c(" 登入會員 ")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{A as default};
